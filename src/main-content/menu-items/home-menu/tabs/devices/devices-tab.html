<div
    class="device-button"
    :if="this.devices && this.devices.length"
    :foreach="device in this.devices"
    :class:camera="device.deviceCategory === 'camera'"
    oncontextmenu="return false;"
>
    <div class="device-header">
        <div class="name">
            <i
                :if="device.deviceCategory === 'evap-cooler'"
                class="iconoir-lifebelt"
            ></i>
            <i
                :if="device.deviceCategory === 'light'"
                :class:iconoir-light-bulb-on="device.value"
                :class:iconoir-light-bulb="!device.value"
                :class:on="device.value"
            ></i>
            <i
                :if="device.deviceCategory === 'dimmable-light'"
                :class:iconoir-light-bulb-on="device.value > 0"
                :class:iconoir-light-bulb="device.value <= 0"
                :class:on="device.value > 0"
            ></i>
            <i
                :if="device.deviceCategory === 'camera'"
                class="iconoir-video-camera"
            ></i>
            ${device.name}
        </div>
        <span
            :onclick="this.onManualToggleClick(device)"
            class="auto-indicator"
            :class:on="!device.manual"
            >${device.manual ? 'MANUAL' : 'AUTO'}
        </span>
        <i
            class="iconoir-edit-pencil"
            :onclick="this.onEditClick(event, device)"
        ></i>
    </div>

    <div class="device-value">
        <!-- Displays value in header for range value devices -->
        <div
            class="value range"
            :if="device.deviceCategory === 'dimmable-light'"
        >
            <div class="percent">${device.value + '%'}</div>

            <div class="bar-track">
                <input
                    style="position: absolute; left: 0"
                    type="range"
                    min="0"
                    max="100"
                    :value="device.value + ''"
                    :oninput="this.onDeviceSliderChange(event, device)"
                    :onchange="this.triggerDeviceUpdate(device)"
                />
                <div
                    class="bar-value"
                    style="position: absolute"
                    :style:width="device.value + '%'"
                ></div>
            </div>
        </div>

        <!-- Show ON/OFF for light devices -->
        <div
            class="value light"
            :if="device.deviceCategory === 'light'"
            :class:on="device.value"
            :onclick="this.onDeviceToggleChange(device)"
        >
            ${device.value ? 'ON' : 'OFF'}
        </div>

        <div class="value camera" :if="device.deviceCategory === 'camera'">
            <img :src="device.value" alt="" />
        </div>

        <!-- Display fan/water pump state for evap-cooler -->
        <div
            :if="device.deviceCategory === 'evap-cooler'"
            class="value evap-cooler"
        >
            <div
                class="fan-state"
                :class:on="device.value.fan"
                :onclick="this.onEvapCoolerToggleClick('fan', device)"
            >
                <i
                    class="iconoir-airplane-rotation"
                    :class:spin="device.value.fan"
                ></i>
                ${device.value.fan ? 'ON' : 'OFF'}
            </div>
            <div
                class="water-pump-state"
                :class:on="device.value.water"
                :onclick="this.onEvapCoolerToggleClick('water', device)"
            >
                <i class="iconoir-droplet"></i>
                ${device.value.water ? 'ON' : 'OFF'}
            </div>

            <div class="target-temp">${device.value.target}°C</div>

            <div
                class="actual-temp"
                :class:reached="Math.round(device.value['room-temp']) <= device.value.target"
            >
                ${(device.value['room-temp']).toFixed(1)}°C
                <i class="iconoir-home-temperature-in"></i>
            </div>
        </div>
    </div>
</div>
<div :else>No Devices detected in your network :(</div>
